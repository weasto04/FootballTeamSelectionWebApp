<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NFL Team Selector</title>
  <style>
  :root{--card-bg:rgba(255,255,255,0.06);--glass:rgba(255,255,255,0.04);--accent:#00b4d8;--bg-accent:rgba(0,0,0,0)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{
      background: radial-gradient(circle at 15% 20%, var(--bg-accent), transparent 20%), radial-gradient(900px 400px at 10% 10%,#0f172a 0%,#071032 25%,#021024 50%,#000814 100%), linear-gradient(135deg,#021024 0%, #0b1220 100%);
      color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:32px;transition:background .6s ease;
    }
    .wrap{width:min(920px,96%);display:grid;grid-template-columns:360px 1fr;gap:28px;align-items:start}
    .panel{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border-radius:14px;padding:20px;box-shadow:0 6px 30px rgba(2,6,23,0.7);backdrop-filter: blur(6px)}
    h1{margin:0 0 10px;font-size:20px;letter-spacing:0.6px}
    label{display:block;font-size:13px;color:#9fb2d6;margin-bottom:8px}
  /* Make the dropdown readable: black text on light background */
  select{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(0,0,0,0.12);background:linear-gradient(180deg,#ffffff,#f3f6fb);color:#000;font-size:15px}
  select option{color:#000}
    .team-card{display:flex;gap:18px;align-items:center;padding:18px;border-radius:12px;margin-top:16px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}
  /* Larger logo display */
  .logo-wrap{width:160px;height:160px;display:flex;align-items:center;justify-content:center;border-radius:16px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(0,0,0,0.14));box-shadow:inset 0 -6px 28px rgba(0,0,0,0.6);position:relative;overflow:hidden}
  .logo-wrap img{max-width:140px;max-height:140px;transition:transform .34s cubic-bezier(.2,.9,.3,1)}
    .logo-wrap:hover img{transform:scale(1.06) rotate(-2deg)}
    .team-info h2{margin:0;font-size:20px}
    .team-info p{margin:4px 0 0;color:#9fb2d6}
    .details{padding:22px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
    footer{margin-top:18px;font-size:12px;color:#97b0d4;text-align:center}
    .brand{display:flex;gap:10px;align-items:center}
    .spark{width:10px;height:10px;border-radius:50%;box-shadow:0 0 18px var(--accent);background:var(--accent)}
    /* small responsive */
  @media (max-width:840px){.wrap{grid-template-columns:1fr;}.logo-wrap{width:120px;height:120px}.logo-wrap img{max-width:100px;max-height:100px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="brand"><div class="spark"></div><h1>NFL Team Selector</h1></div>
      <p style="color:#9fb2d6;margin-top:6px">Pick a team and see its division and logo. No frameworks — just HTML/CSS/JS.</p>

      <div style="margin-top:18px">
        <label for="teamSelect">Choose a team</label>
        <select id="teamSelect"><option value="">-- Select a team --</option></select>
      </div>

      <div class="team-card" id="teamCard" style="display:none">
        <div class="logo-wrap" id="logoWrap">
          <img id="teamLogo" src="" alt="team logo" onerror="this.style.display='none'">
        </div>
        <div class="team-info">
          <h2 id="teamName">Team Name</h2>
          <p id="teamDivision">Division</p>
        </div>
      </div>

      <footer>Built with care · Data from local <code>team_data.csv</code></footer>
    </div>

    <div class="panel details">
      <h3 style="margin-top:0">Team details</h3>
      <div id="detailsArea">
        <p style="color:#9fb2d6">Select a team to view more info, including an external logo from ESPN where available.</p>
      </div>
    </div>
  </div>

  <script>
    // Fallback CSV data (used if fetch fails, e.g. file://). Kept in-sync with your uploaded file.
    const defaultCSV = `team_abbr,team_name,team_division,team_logo_espn
ARI,Arizona Cardinals,NFC West,https://a.espncdn.com/i/teamlogos/nfl/500/ari.png
ATL,Atlanta Falcons,NFC South,https://a.espncdn.com/i/teamlogos/nfl/500/atl.png
BAL,Baltimore Ravens,AFC North,https://a.espncdn.com/i/teamlogos/nfl/500/bal.png
BUF,Buffalo Bills,AFC East,https://a.espncdn.com/i/teamlogos/nfl/500/buf.png
CAR,Carolina Panthers,NFC South,https://a.espncdn.com/i/teamlogos/nfl/500-dark/car.png
CHI,Chicago Bears,NFC North,https://a.espncdn.com/i/teamlogos/nfl/500/chi.png
CIN,Cincinnati Bengals,AFC North,https://a.espncdn.com/i/teamlogos/nfl/500/cin.png
CLE,Cleveland Browns,AFC North,https://a.espncdn.com/i/teamlogos/nfl/500/cle.png
DAL,Dallas Cowboys,NFC East,https://a.espncdn.com/i/teamlogos/nfl/500/dal.png
DEN,Denver Broncos,AFC West,https://a.espncdn.com/i/teamlogos/nfl/500/den.png
DET,Detroit Lions,NFC North,https://a.espncdn.com/i/teamlogos/nfl/500/det.png
GB,Green Bay Packers,NFC North,https://a.espncdn.com/i/teamlogos/nfl/500/gb.png
HOU,Houston Texans,AFC South,https://a.espncdn.com/i/teamlogos/nfl/500/hou.png
IND,Indianapolis Colts,AFC South,https://a.espncdn.com/i/teamlogos/nfl/500/ind.png
JAX,Jacksonville Jaguars,AFC South,https://a.espncdn.com/i/teamlogos/nfl/500/jax.png
KC,Kansas City Chiefs,AFC West,https://a.espncdn.com/i/teamlogos/nfl/500/kc.png
LA,Los Angeles Rams,NFC West,https://a.espncdn.com/i/teamlogos/nfl/500/lar.png
LAC,Los Angeles Chargers,AFC West,https://a.espncdn.com/i/teamlogos/nfl/500/lac.png
LV,Las Vegas Raiders,AFC West,https://a.espncdn.com/i/teamlogos/nfl/500/lv.png
MIA,Miami Dolphins,AFC East,https://a.espncdn.com/i/teamlogos/nfl/500/mia.png
MIN,Minnesota Vikings,NFC North,https://a.espncdn.com/i/teamlogos/nfl/500/min.png
NE,New England Patriots,AFC East,https://a.espncdn.com/i/teamlogos/nfl/500/ne.png
NO,New Orleans Saints,NFC South,https://a.espncdn.com/i/teamlogos/nfl/500/no.png
NYG,New York Giants,NFC East,https://a.espncdn.com/i/teamlogos/nfl/500/nyg.png
NYJ,New York Jets,AFC East,https://a.espncdn.com/i/teamlogos/nfl/500/nyj.png
PHI,Philadelphia Eagles,NFC East,https://a.espncdn.com/i/teamlogos/nfl/500/phi.png
PIT,Pittsburgh Steelers,AFC North,https://a.espncdn.com/i/teamlogos/nfl/500/pit.png
SEA,Seattle Seahawks,NFC West,https://a.espncdn.com/i/teamlogos/nfl/500/sea.png
SF,San Francisco 49ers,NFC West,https://a.espncdn.com/i/teamlogos/nfl/500/sf.png
TB,Tampa Bay Buccaneers,NFC South,https://a.espncdn.com/i/teamlogos/nfl/500/tb.png
TEN,Tennessee Titans,AFC South,https://a.espncdn.com/i/teamlogos/nfl/500/ten.png
WAS,Washington Commanders,NFC East,https://a.espncdn.com/i/teamlogos/nfl/500/wsh.png`;

    // map divisions to accent colors
    const divisionColors = {
      'NFC West':'#ef476f','NFC South':'#ffd166','AFC North':'#06d6a0','AFC East':'#118ab2','NFC North':'#8a2be2','AFC West':'#ff7b00','NFC East':'#ff4d6d','AFC South':'#00b4d8'
    };

    const select = document.getElementById('teamSelect');
    const teamCard = document.getElementById('teamCard');
    const teamLogo = document.getElementById('teamLogo');
    const logoWrap = document.getElementById('logoWrap');
    const teamNameEl = document.getElementById('teamName');
    const teamDivisionEl = document.getElementById('teamDivision');
    const detailsArea = document.getElementById('detailsArea');

    function parseCSV(text){
      const lines = text.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);
      const header = lines.shift().split(',').map(h=>h.trim());
      return lines.map(line=>{
        const parts = line.split(',');
        const obj = {};
        header.forEach((h,i)=>obj[h]=parts[i] ? parts[i].trim() : '');
        return obj;
      });
    }

    function populateSelect(teams){
      teams.sort((a,b)=>a.team_name.localeCompare(b.team_name));
      teams.forEach(t=>{
        const opt = document.createElement('option');
        opt.value = t.team_abbr;
        opt.textContent = t.team_name;
        select.appendChild(opt);
      });
    }

    function showTeam(team){
      if(!team){teamCard.style.display='none';detailsArea.innerHTML='<p style="color:#9fb2d6">Select a team to view more info, including an external logo from ESPN where available.</p>';return}
      teamCard.style.display = 'flex';
      teamLogo.style.display = 'block';
      teamLogo.src = team.team_logo_espn || '';
      teamNameEl.textContent = team.team_name;
      teamDivisionEl.textContent = team.team_division;
  const color = divisionColors[team.team_division] || '#00b4d8';
  document.documentElement.style.setProperty('--accent', color);
  // create a soft translucent radial accent for the page background
  const rgbaA = hexToRgba(color,0.12);
  const rgbaB = hexToRgba(color,0.06);
  document.documentElement.style.setProperty('--bg-accent', rgbaA);
  logoWrap.style.boxShadow = `inset 0 -10px 40px ${rgbaB}, 0 8px 40px ${rgbaA}`;

      detailsArea.innerHTML = `
        <p><strong>Abbreviation:</strong> ${team.team_abbr}</p>
        <p><strong>Division:</strong> ${team.team_division}</p>
        <p style="margin-top:12px;color:#9fb2d6;font-size:13px">Logo source: <a href="${team.team_logo_espn}" target="_blank" style="color:inherit">ESPN</a> (if available)</p>
      `;
    }

    function hexToRgba(hex,alpha){
      const h = hex.replace('#','');
      const bigint = parseInt(h.length===3? h.split('').map(c=>c+c).join(''): h,16);
      const r = (bigint>>16)&255; const g = (bigint>>8)&255; const b = bigint&255;
      return `rgba(${r},${g},${b},${alpha})`;
    }

    function generateSVGBadge(text, color){
      const bg = color;
      const fg = '#fff';
      const svg = `
        <svg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 300 300'>
          <defs>
            <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
              <stop offset='0' stop-color='${bg}' stop-opacity='1'/>
              <stop offset='1' stop-color='${bg}' stop-opacity='0.8'/>
            </linearGradient>
          </defs>
          <rect width='100%' height='100%' rx='28' fill='url(#g)' />
          <text x='50%' y='50%' font-size='84' font-family='Arial, Helvetica, sans-serif' fill='${fg}' text-anchor='middle' dominant-baseline='central' font-weight='700'>${escapeHtml(text)}</text>
        </svg>
      `;
      return svg;
    }

    function escapeHtml(s){return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"})[c]);}

  async function init(){
      let text = null;
      try{
        const resp = await fetch('team_data.csv');
        if(resp.ok){text = await resp.text();}
      }catch(e){/* ignore fetch errors */}
      if(!text){text = defaultCSV}

      const teams = parseCSV(text);
      window.__teams = teams; // for debugging in console
  populateSelect(teams);

      select.addEventListener('change', ()=>{
        const val = select.value;
        const team = teams.find(t=>t.team_abbr===val);
        showTeam(team);
      });

      // logo fallback: if external image fails, replace with a generated SVG badge
      teamLogo.addEventListener('error', ()=>{
        const val = select.value;
        const team = teams.find(t=>t.team_abbr===val);
        if(team){
          const svg = generateSVGBadge(team.team_abbr, divisionColors[team.team_division]||'#00b4d8');
          teamLogo.style.display='block';
          teamLogo.src = 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg);
        }
      });

      // If URL has ?team=ARI style, preselect
      const params = new URLSearchParams(location.search);
      const pre = params.get('team');
      if(pre){select.value=pre;select.dispatchEvent(new Event('change'))}
    }

    init();
  </script>
</body>
</html>
